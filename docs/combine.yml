steps:
  - run: "./theme/node_modules/.bin/parcel build theme/content/assets/_app.js --out-dir output/assets --out-file app.js"
    watch: ["./theme/content/assets/_app.js"]
  # Note how we're using a modified copy of _tailwind.css from the site itself, not the theme
  # (this is also run after JS so that purge uses JS too)
  - run: "./theme/node_modules/.bin/tailwind -i ./content/assets/_tailwind.css -o ./output/assets/tailwind.css"
    watch:
      - "./tailwind.config.js"
      - "./content/assets/_tailwind.css"
  - run: "./theme/node_modules/.bin/pitchfork index output -c .content"

variables:
  name: Deps
  support_url: "/support/"
  login_url: "https://3.dependencies.io/login/"
  base_url:
    default: "https://docs.dependencies.io"
    from_env: URL  # netlify
  version:
    default: "\"latest\""
    from_env: COMMIT_REF
  google_tag_manager_id:
    from_env: GOOGLE_TAG_MANAGER_ID
